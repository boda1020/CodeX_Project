<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<ScrollPane fitToWidth="true" hbarPolicy="NEVER" style="-fx-background: #f5f5f5;" vbarPolicy="AS_NEEDED" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="Controller.ResultManagementController">

    <VBox alignment="TOP_CENTER" spacing="20" style="-fx-background-color: #f5f5f5;">

        <!-- Top Bar -->
        <HBox alignment="CENTER" style="-fx-background-color: #262451; -fx-padding: 20 30;">

            <!-- Back Button -->
            <Button fx:id="backButton" onAction="#handleBack" style="-fx-background-color: transparent; -fx-text-fill: white; -fx-font-size: 16; -fx-border-color: white; -fx-border-width: 2; -fx-border-radius: 8; -fx-background-radius: 8; -fx-padding: 10 20; -fx-cursor: hand;" text="â—„ Back to Dashboard" />

            <Region HBox.hgrow="ALWAYS" />

            <Label alignment="CENTER" style="-fx-text-fill: white; -fx-font-size: 24; -fx-font-weight: bold;" text="Results Management" />

            <Region HBox.hgrow="ALWAYS" />
        </HBox>

        <!-- Main Content -->
        <VBox alignment="TOP_CENTER" spacing="20" style="-fx-padding: 30;">

            <!-- Main Title -->
            <Label style="-fx-text-fill: #262451; -fx-font-size: 32; -fx-font-weight: bold;" text="University Student Results Management System">
                <VBox.margin>
                    <Insets bottom="20" />
                </VBox.margin>
            </Label>

            <!-- Main Container -->
            <VBox prefWidth="1100" spacing="0" style="-fx-background-color: white; -fx-background-radius: 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 15, 0, 0, 3); -fx-padding: 40;">

                <!-- Header -->
                <VBox spacing="10">
                    <Label style="-fx-text-fill: #262451; -fx-font-size: 28; -fx-font-weight: bold;" text="Course Results" />

                    <Label style="-fx-text-fill: #666666; -fx-font-size: 16;" text="View, add, update and delete student grades." />

                    <VBox.margin>
                        <Insets bottom="20" />
                    </VBox.margin>
                </VBox>

                <!-- Search Student Section -->
                <VBox spacing="15" style="-fx-background-color: #f8f9fa; -fx-background-radius: 12; -fx-padding: 20; -fx-margin: 0 0 20 0;">
                    <Label style="-fx-text-fill: #262451; -fx-font-size: 18; -fx-font-weight: bold;" text="Search Student" />

                    <HBox spacing="15" alignment="CENTER_LEFT">
                        <Label style="-fx-text-fill: #333333; -fx-font-size: 14;" text="Academic Code:" />
                        <TextField fx:id="studentCodeField" prefWidth="200" promptText="Enter student code (e.g., 20240001)" />
                        <Button fx:id="searchStudentButton" onAction="#handleSearchStudent" style="-fx-background-color: #262451; -fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 14; -fx-background-radius: 8; -fx-padding: 8 20; -fx-cursor: hand;" text="Search" />
                    </HBox>
                </VBox>

                <!-- Content Area -->
                <HBox alignment="TOP_LEFT" spacing="20">

                    <!-- Left Side - Table -->
                    <VBox prefWidth="700" spacing="15" style="-fx-background-color: #262451; -fx-background-radius: 15; -fx-padding: 25;">

                        <Label style="-fx-text-fill: white; -fx-font-size: 20; -fx-font-weight: bold;" text="Course Results" />

                        <!-- Table -->
                        <TableView fx:id="courseTable" prefHeight="350" style="-fx-background-color: white; -fx-background-radius: 10;">
                            <columns>
                                <TableColumn fx:id="courseNameCol" prefWidth="250.0" text="Course Name" />
                                <TableColumn fx:id="creditsCol" prefWidth="80" text="Credits" />
                                <TableColumn fx:id="gradeCol" prefWidth="80" text="Grade" />
                                <TableColumn fx:id="gpaCol" prefWidth="80" text="GPA" />
                                <TableColumn fx:id="degreeCol" prefWidth="100" text="Degree" />
                                <TableColumn fx:id="examDateCol" prefWidth="120" text="Exam Date" />
                            </columns>
                        </TableView>

                        <!-- Action Buttons -->
                        <HBox alignment="CENTER" spacing="15">
                            <Button fx:id="addButton" onAction="#handleAdd" prefHeight="45" prefWidth="140" style="-fx-background-color: #262451; -fx-text-fill: white; -fx-font-size: 15; -fx-font-weight: bold; -fx-background-radius: 8; -fx-border-color: white; -fx-border-width: 2; -fx-border-radius: 8; -fx-cursor: hand;" text="+ Add" />
                            <Button fx:id="editButton" onAction="#handleEdit" prefHeight="45" prefWidth="140" style="-fx-background-color: #262451; -fx-text-fill: white; -fx-font-size: 15; -fx-font-weight: bold; -fx-background-radius: 8; -fx-border-color: white; -fx-border-width: 2; -fx-border-radius: 8; -fx-cursor: hand;" text="âœŽ Edit" />
                            <Button fx:id="deleteButton" onAction="#handleDelete" prefHeight="45" prefWidth="140" style="-fx-background-color: #262451; -fx-text-fill: white; -fx-font-size: 15; -fx-font-weight: bold; -fx-background-radius: 8; -fx-border-color: white; -fx-border-width: 2; -fx-border-radius: 8; -fx-cursor: hand;" text="ðŸ—‘ Delete" />
                        </HBox>
                    </VBox>

                    <!-- Right Side - Info Cards -->
                    <VBox prefWidth="350" spacing="20">

                        <!-- Student Overview Card -->
                        <VBox spacing="12" style="-fx-background-color: #f8f9fa; -fx-background-radius: 12; -fx-padding: 20; -fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-border-radius: 12;">

                            <HBox alignment="CENTER_LEFT">
                                <Label style="-fx-text-fill: #262451; -fx-font-size: 18; -fx-font-weight: bold;" text="Student Overview" />
                                <Region HBox.hgrow="ALWAYS" />
                            </HBox>

                            <VBox spacing="8">
                                <Label fx:id="studentNameLabel" style="-fx-text-fill: #333333; -fx-font-size: 14;" text="Name: Search for student" />
                                <Label fx:id="studentIdLabel" style="-fx-text-fill: #333333; -fx-font-size: 14;" text="ID: -----" />
                                <Label fx:id="studentProgramLabel" style="-fx-text-fill: #333333; -fx-font-size: 14;" text="Program: -----" />
                            </VBox>
                        </VBox>

                        <!-- Summary Card -->
                        <VBox spacing="15" style="-fx-background-color: #f8f9fa; -fx-background-radius: 12; -fx-padding: 20; -fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-border-radius: 12;">

                            <Label style="-fx-text-fill: #262451; -fx-font-size: 18; -fx-font-weight: bold;" text="Summary" />

                            <VBox spacing="12" style="-fx-background-color: #262451; -fx-background-radius: 10; -fx-padding: 20;">

                                <HBox alignment="CENTER_LEFT">
                                    <Label style="-fx-text-fill: white; -fx-font-size: 16;" text="Total Courses:" />
                                    <Region HBox.hgrow="ALWAYS" />
                                    <Label fx:id="totalCoursesLabel" style="-fx-text-fill: white; -fx-font-size: 16; -fx-font-weight: bold;" text="0" />
                                </HBox>

                                <HBox alignment="CENTER_LEFT">
                                    <Label style="-fx-text-fill: white; -fx-font-size: 16;" text="Average Grade:" />
                                    <Region HBox.hgrow="ALWAYS" />
                                    <Label fx:id="averageGradeLabel" style="-fx-text-fill: white; -fx-font-size: 16; -fx-font-weight: bold;" text="N/A" />
                                </HBox>

                                <HBox alignment="CENTER_LEFT">
                                    <Label style="-fx-text-fill: white; -fx-font-size: 16;" text="Current GPA" />
                                    <Region HBox.hgrow="ALWAYS" />
                                    <Label fx:id="currentGPALabel" style="-fx-text-fill: white; -fx-font-size: 16; -fx-font-weight: bold;" text="0.0" />
                                </HBox>
                            </VBox>
                        </VBox>
                    </VBox>
                </HBox>
            </VBox>
        </VBox>
    </VBox>
</ScrollPane>